<div class="user-nav-toggle-row" *ngIf="!userNavOpen">
  <button class="logout-btn" aria-label="Logga ut" (click)="logout()">
    <i class="bi bi-box-arrow-right"></i>
  </button>
  <button (click)="toggleNav()" class="user-nav-toggle-closed" aria-label="Öppna användarmeny">
    <ng-container *ngIf="hasNewNotification; else defaultPerson">
      <svg xmlns="http://www.w3.org/2000/svg" class="bi bi-person-fill-exclamation person-exclamation-svg" viewBox="0 0 16 16">
        <path d="M11 5a3 3 0 1 1-6 0 3 3 0 0 1 6 0m-9 8c0 1 1 1 1 1h5.256A4.5 4.5 0 0 1 8 12.5a4.5 4.5 0 0 1 1.544-3.393Q8.844 9.002 8 9c-5 0-6 3-6 4" fill="#fff" />
        <path d="M16 12.5a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0m-3.5-2a.5.5 0 0 0-.5.5v1.5a.5.5 0 0 0 1 0V11a.5.5 0 0 0-.5-.5m0 4a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1" fill="#dd1212"/>
      </svg>
    </ng-container>
    <ng-template #defaultPerson>
      <i class="bi bi-person-fill icon-svg"></i>
    </ng-template>
  </button>
</div>
<!-- Backdrop -->
<div *ngIf="userNavOpen" class="user-nav-backdrop" (click)="toggleNav()"></div>

<!-- Overlay Menu -->
<nav *ngIf="userNavOpen" class="user-nav-overlay">
  <button (click)="toggleNav()" class="icon-btn user-nav-toggle" aria-label="Stäng användarmeny">
    <i class="bi bi-person-fill"></i>
    <span class="nav-label">Stäng meny</span>
  </button>

<a [routerLink]="'/user/messages'" [class.active]="isActive('/messages')" class="icon-btn">
  <ng-container *ngIf="hasNewNotification; else defaultIcon">
    <svg
      xmlns="http://www.w3.org/2000/svg"
      class="bi bi-envelope-exclamation-fill icon-svg"
      viewBox="0 0 16 16">
      <path d="M.05 3.555A2 2 0 0 1 2 2h12a2 2 0 0 1 1.95 1.555L8 8.414zM0 4.697v7.104l5.803-3.558zM6.761 8.83l-6.57 4.026A2 2 0 0 0 2 14h6.256A4.5 4.5 0 0 1 8 12.5a4.49 4.49 0 0 1 1.606-3.446l-.367-.225L8 9.586zM16 4.697v4.974A4.5 4.5 0 0 0 12.5 8a4.5 4.5 0 0 0-1.965.45l-.338-.207z" fill="#fff"/>
      <path d="M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7m.5-5v1.5a.5.5 0 0 1-1 0V11a.5.5 0 0 1 1 0m0 3a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0" fill="#dd1212"/>
    </svg>
  </ng-container>
  <ng-template #defaultIcon>
    <i class="bi bi-envelope-fill"></i>
  </ng-template>
  <span class="nav-label">Meddelanden</span>
</a>

  <a [routerLink]="'/user-page/settings'" [class.active]="isActive('/settings')" class="icon-btn">
    <i class="bi bi-gear-fill"></i>
    <span class="nav-label">Inställningar</span>
  </a>
  <a [routerLink]="'/user-page/readlist'" [class.active]="isActive('/readlist')" class="icon-btn">
    <i class="bi bi-heart-fill"></i>
    <span class="nav-label">Min läslista</span>
  </a>
  <a [routerLink]="'/user-page/reservations'" [class.active]="isActive('/reservations')" class="icon-btn">
    <i class="bi bi-book"></i>
    <span class="nav-label">Mina reserverade böcker</span>
  </a>
  <a [routerLink]="'/user-page/checkouts'" [class.active]="isActive('/checkouts')" class="icon-btn">
    <i class="bi bi-book-fill"></i>
    <span class="nav-label">Mina lånade böcker</span>
  </a>
</nav>
